var watchL,watchC,maxAccuracy=100,meter2feet=3.28084,feet2mile=5280;function initCompass(){Compass.needGPS(function(){$("#compass").html("<br/>GPS signal needed to get compass direction")}).needMove(function(){$("#compass").html("<br/>Please move to get orientation")}).init(function(){$("#compass").html('<br/><div id="arrow"><div></div></div>'),getHash(),watchL=setInterval(doWatch,1e3),watchC=Compass.watch(function(a){deviceHeading=a,setCompass()})})}$(function(){if("geolocation"in navigator){ver=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]}}(),null!=ver&&12==ver[0]&&2==ver[1]?msg="<br/>Please allow Motion & Orientation Access in Settings > Safari for the compass to work":msg='<br/>Compass is not available on your device.<br/><br/>You can use the QR code to open this page on your mobile.<br/><img src="https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=https://geohashing.info/mobile/'+date+"/"+graticule+'&choe=UTF-8" />',functional=!0,Compass.noSupport(function(){$("#compass").html(msg),functional=!1}),functional&&initCompass()}else $("#compass").html("<br/>Geolocation is not available on your device")});var hash=null,loc=null,deviceHeading=0,bearing=0,accuracy=999;function getHash(){$.getJSON("//data.geohashing.info/hash/"+date+"/"+graticule+".json",function(a){hash=LatLon(a.lat,a.lng)})}function getLocation(){navigator.geolocation.getCurrentPosition(function(a){loc=LatLon(a.coords.latitude,a.coords.longitude),$("#accuracy").text(a.coords.accuracy+" m / "+(a.coords.accuracy*meter2feet).toFixed(0)+" ft"),accuracy=a.coords.accuracy.toFixed(0),maxAccuracy<accuracy?$("#accuracy").addClass("low"):$("#accuracy").removeClass("low")},function(){},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}function setCompass(){heading=360-deviceHeading+bearing,$("#arrow").css("-moz-transform","rotate("+heading+"deg)"),$("#arrow").css("-webkit-transform","rotate("+heading+"deg)"),$("#arrow").css("-o-transform","rotate("+heading+"deg)"),$("#arrow").css("-ms-transform","rotate("+heading+"deg)")}function doWatch(){if(getLocation(),null!==hash&&null!==loc){if($("#compass").show(),dist=loc.distanceTo(hash),unit="m",bearing=loc.bearingTo(hash),dist<accuracy&&accuracy<maxAccuracy){$("#compass").addClass("reached"),$("#status").show();var a=new Date;$("#status").html("<h2>Congratulations!</h2><p>You have reached the<br/><br/><strong>"+date+" "+graticule+"</strong><br/><br/> hash on</p><p>"+a.toLocaleString()+"</p>")}else $("#compass").removeClass("reached"),$("#status").hide();var t=dist*meter2feet;9999<dist&&(dist/=1e3,unit="km"),unit2="ft",feet2mile<t&&(t/=feet2mile,unit2="mi"),$("#distance").text(dist.toFixed(2)+" "+unit+" / "+t.toFixed(2)+" "+unit2)}}
//# sourceMappingURL=mobile.min.js.map