{"version":3,"sources":["base.js"],"names":["map","view","settings","ol","xs","xt","xl","ys","yt","yl","gridLayer","gridVector","geolocation","mapLayer","content","closer","overlay","markerLayers","days","0","1","2","3","4","5","6","roundCoords","coords","decimals","toFixed","updateUrl","url","window","location","host","$","val","user","grid","proj","transform","getCenter","Math","round","zoom","value","is","protocol","history","replaceState","getUrl","select","document","execCommand","closeDisclaimer","expiration_date","Date","cookie_string","setTime","getTime","now","toGMTString","cookie","greybox","close","addLiAlpha","ul","li","added","each","this","text","toLowerCase","insertBefore","appendTo","controls","show","duration","animate","left","borderBottomRightRadius","width","height","paddingLeft","hide","toggle","l","css","change","slider","doZoom","to","lat","lng","lvl","center","reset","homeGrid","point","what","home","set","init","marker","get","prop","layer","removeLayer","source","Vector","addFeature","Feature","geometry","geom","Point","style","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","src","addLayer","getZoom","distance","dist","Sphere","haversineDistance","popover","coordinates","feature","geoName","getJSON","json","html","grat","name","id","getGeometry","getCoordinates","addClass","removeClass","x","toString","split","y","join","replace","setPosition","undefined","isOpen","loadmap","Overlay","element","getElementById","autoPan","autoPanAnimation","click","blur","key","defaultZoom","baseMaps","View","minZoom","system","maxZoom","rotation","projection","Geolocation","getProjection","setTracking","on","getPosition","OSM","hyb","BingMaps","bingKey","imagerySet","sat","baseMapLayer","list","current","type","register","load","setVisible","newLayer","Tile","visible","push","baseMap","Group","layers","navigator","userAgent","match","renderer","resize","updateSize","Map","target","control","ScaleLine","Attribution","collapsible","interactions","interaction","defaults","rotate","altShiftDragRotate","pinchRotate","overlays","evt","forEachFeatureAtPixel","pixel","coordinate","hit","getTargetElement","cursor","open","box","data","attr","title","fadeIn","slideDown","scrollTop","slideUp","fadeOut","gcookie","setFullYear","getFullYear","single","dayOf","controlsVisible","setHomeGrid","resetSetHomeGrid","JSON","stringify","unset","alert","w30warning","timeDiff","diffDays","date1","datepicker","date2","abs","ceil","c","baseLat","floor","baseLng","latSign","lngSign","draw","length","drawLine","fill","Fill","color","weight","stroke","Stroke","points","i","LineString","curDate","date","force","keepPopover","Object","prototype","call","doDraw","day","getTimezoneOffset","getDay","getDate","bgColor","fgColor","s","west","parseFloat","east","global","refreshMaxDate","maxDate","setTimer","nextCheck","time","setTimeout","changeMonth","changeYear","dateFormat","showOtherMonths","selectOtherMonths","firstDay","minDate","altField","defaultDate","nextText","prevText","hideIfNoPrevNext","onSelect","min","max","slide","event","ui","hasClass","colorSet","stopPropagation","keyup","g","keyCode","which","niceScroll","showDisclaimer"],"mappings":"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","file":"map.min.js","sourcesContent":["/*\n * file:\t\tscript.js\n * author:\t\tMarten Tacoma\n * contents:\tall custom js\n */\n\nvar map, view, settings, ol, xs,xt,xl, ys,yt,yl, gridLayer, gridVector, geolocation, mapLayer, markerLayers = [], content, closer, overlay, days = {0:'Su', 1:'Mo', 2:'Tu', 3:'We', 4:'Th', 5:'Fr', 6:'Sa'};\n\nfunction roundCoords(coords, decimals){\n\treturn coords[1].toFixed(decimals)+','+coords[0].toFixed(decimals);\t\n}\n\nfunction updateUrl(){\n\tvar url = \"//\" + window.location.host\n\t\t+ '/t:' + $('input[name=map]:checked').val()\n\t\t+ '/' + $('#datepicker').val() \n\t\t+ '/g:' + roundCoords(settings.user.grid,1)\n\t\t+ '/c:' + roundCoords(ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326'), 3)\n\t\t+ '/z:' + Math.round(zoom.value);\n\tif(!$('#showWeek').is(':checked')){\n\t\turl = url + '/s';\n\t}\n\t$('#url').val(window.location.protocol + url);\n\tif($('#updateBar').is(':checked')){\n\t\twindow.history.replaceState({}, null, url);\n\t}\n}\n\nfunction getUrl(){\n\t$('#url').select();\n\tdocument.execCommand(\"copy\");\n}\n\nfunction closeDisclaimer(){\n\tvar expiration_date = new Date();\n\texpiration_date.setTime(expiration_date.getTime()+(30*24*60*60*1000));\n\tvar cookie_string = \"disclaimer=\"+(Date.now() / 1000 | 0)+\";secure; path=/; expires=\" + expiration_date.toGMTString();\n\tdocument.cookie = cookie_string;\n\tgreybox.close();\n}\n\n//insert li at the right alphabetical place in an ul\nfunction addLiAlpha(ul, li){\n\tvar added = false;\n\t$(ul+\" li\").each(function(){\n\t\tif($(this).text().toLowerCase() > $(li).text().toLowerCase()){\n\t\t\t$(li).insertBefore($(this));\n\t\t\tadded = true;\n\t\t\treturn false;\n\t\t}\n\t});\n\tif(!added){\n\t\t$(li).appendTo($(ul));\n\t}\n}\n\nvar controls = {\n\tshow: function(duration){\n\t\t$('#controls').animate({left:'0px'},duration);\n\t\t$('#controlsTop').animate({left:'0px',borderBottomRightRadius:0},duration);\n\t\t$('.ol-scale-line').animate({left:'328px'},duration);\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\t$('#w30warning').animate({left:'320px',paddingLeft:'0px'});\n\t\t}\n\t},\n\thide: function(){\n\t\t$('#controls').animate({left:'-320px'});\n\t\t$('#controlsTop').animate({left:'-242px',borderBottomRightRadius:5});\n\t\t$('.ol-scale-line').animate({left:'8px'});\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\t$('#w30warning').animate({left:'0px',paddingLeft:'80px'});\n\t\t}\n\t},\n\ttoggle: function(){\n\t\tl = $('#controls').css('left');\n\t\tif(l === '0px'){\n\t\t\tcontrols.hide();\n\t\t} else if (l === '-320px') {\n\t\t\tcontrols.show();\n\t\t}\n\t}\n};\n\nvar zoom = {\n\tvalue: settings.user.zoom,\n\tchange: function(){\n\t\tzoom.value = $('#inputZoomLevel').val();\n\t\tupdateUrl();\n\t\t$('#zoomControl .slider').slider('value', zoom.value);\n\t\tzoom.doZoom(zoom.value);\n\t},\n\tdoZoom: function(value){\n\t\tview.animate({zoom: value, duration:500});\n\t},\n\tto: function(lat,lng,lvl){\n\t\tview.animate({zoom: lvl, center: ol.proj.transform([lng,lat], 'EPSG:4326', 'EPSG:3857'), duration:500});\n\t},\n\treset: function(){\n\t\tview.animate({zoom: settings.user.zoom, center: ol.proj.transform(settings.user.center, 'EPSG:4326', 'EPSG:3857'), duration:500});\n\t}\n};\n\nfunction homeGrid(point){\n\tvar what = $('input[name=setHomeGrid]:checked').val();\n\tvar point = ol.proj.transform(point, 'EPSG:3857', 'EPSG:4326');\n\tswitch(what){\n\t\tcase 'home':\n\t\t\thome.set(point);\n\t\t\tbreak;\n\t\tcase 'grid':\n\t\t\tgrid.init(point);\n\t\t\tmarker.get(true);\n\t\t\tbreak;\n\t\tcase 'both':\n\t\t\thome.set(point);\n\t\t\tgrid.init(point);\n\t\t\tmarker.get(true);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t//do nothing\n\t}\n\tif($('#resetSetHomeGrid').is(':checked')){\n\t\t$('#setHomeGridNothing').prop('checked', true);\n\t}\n}\n\nvar home = {\n\tlayer: null,\n\tmarker: null,\n\tpoint: null,\n\tset: function(point){\n\t\tmap.removeLayer(home.layer);\n\t\twhile(point[0] > 180){\n\t\t\tpoint[0] -= 360;\n\t\t}\n\t\twhile(point[0] < -180){\n\t\t\tpoint[0] += 360;\n\t\t}\n\t\thome.point = point;\n\t\tsettings.user.home = point;\n\t\thome.marker = new ol.source.Vector({});\n\t\thome.marker.addFeature(new ol.Feature({geometry: new ol.geom.Point(ol.proj.transform(point, 'EPSG:4326', 'EPSG:3857'))}));\n\t\thome.layer = new ol.layer.Vector({\n\t\t\tsource: home.marker,\n\t\t\tstyle: new ol.style.Style({\n\t\t\t\timage: new ol.style.Icon({\n\t\t\t\t\tanchor: [16,16],\n\t\t\t\t\tanchorXUnits: 'pixels',\n\t\t\t\t\tanchorYUnits: 'pixels',\n\t\t\t\t\tsrc: '/img/marker.png'\n\t\t\t\t})\n\t\t\t})\n\t\t});\n\t\tmap.addLayer(home.layer);\n\t\tif(view.getZoom() === 2){\n\t\t\tzoom.to(point[1],point[0],settings.user.zoom);\n\t\t\tsettings.user.center = ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326');\n\t\t}\n\t\tupdateUrl();\n\t},\n\tdistance: function(location){\n\t\tif(home.point == null){\n\t\t\treturn '';\n\t\t}\n\t\tvar wgs84Sphere = new ol.Sphere(6378137);\n\t\tvar dist = wgs84Sphere.haversineDistance(home.point,location)/1000;\n\t\treturn dist.toFixed(2) + ' km / ' +(dist*0.621371).toFixed(2) + ' miles<br/>';\n\t}\n};\n\npopover = {\n\tlat: null,\n\tlng: null,\n\tcoordinates: null,\n\tfeature: null,\n\tgeoName: function(){\n\t\t$.getJSON(\n\t\t\t'//data.geohashing.info/geoName/'+this.lat+'/'+this.lng,\n\t\t\tfunction(json){\n\t\t\t\t$('#geoName').html(json.geoName);\n\t\t\t}\n\t\t);\n\t},\n\tshow: function(feature){\n\t\tthis.feature = feature;\n\t\tthis.coordinates = ol.proj.transform(feature.getGeometry().getCoordinates(), 'EPSG:3857', 'EPSG:4326');\n\t\tthis.lng = this.coordinates[0];\n\t\tthis.lat = this.coordinates[1];\n\t\tthis.geoName();\n\t\tif(this.feature.get('global')){\n\t\t\t$('#popup').addClass('global');\n\t\t\tvar name = 'Globalhash ' + feature.get('date');\n\t\t\tvar grat = 'global';\n\t\t\tvar id = this.feature.get('date') + '_global';\n\t\t} else {\n\t\t\t$('#popup').removeClass('global');\n\t\t\tvar x = this.lng.toString().split('.')[0];\n\t\t\tvar y = this.lat.toString().split('.')[0];\n\t\t\tvar grat = y + ',' + x;\n\t\t\tvar name = 'Geohash ' + this.feature.get('date') + ' ' + y + ' ' + x;\n\t\t\tvar id = this.feature.get('date') + '_' + y + '_' + x;\n\t\t}\n\t\tcontent.html('<strong>'+name+'</strong> <button onclick=\"window.open(&quot;https://geohashing.site/geohashing/'+id+'&quot;)\">Meetup</button><br />'+\n\t\t\tthis.lat.toFixed(5) + ', ' + this.lng.toFixed(5) + ' <button onclick=\"zoom.to('+this.lat+','+this.lng+', 15)\">Zoom in</button><br />' +\n\t\t\t'<span id=\"geoName\"><span style=\"color:silver;font-style:italic\">[A location name should appear here]</span></span><br/>' +\n\t\t\thome.distance(this.coordinates) + \n\t\t\t'<button onclick=\"window.open(&quot;https://data.geohashing.info/hash/' + this.feature.get('date').split('-').join('/') + '/' + grat + '.gpx&quot;)\">GPX</button> <button onclick=\"window.open(&quot;http://geo.crox.net/poster/'+id+'&quot;)\">Poster</button> <button onclick=\"window.open(&quot;http://www.geocaching.com/seek/nearest.aspx?origin_lat='+this.lat+'&amp;origin_long='+this.lng+'&quot;)\">Nearby geocaches</button>'\n\t\t\t+ '<button onclick=\"window.open(&quot;https://maps.google.com/?q='+this.lat+','+this.lng+'&quot;)\">Google Maps</button>'\n\t\t\t+ ' <button onclick=\"window.open(&quot;https://www.bing.com/maps/?rtp=~pos.'+this.lat+'_'+this.lng+'_'+name.replace(' ', '+')+'&quot;)\">Bing Maps</button>'\n\t\t\t+ ' <button onclick=\"window.open(&quot;http://www.openstreetmap.org/index.html?mlat='+this.lat+'&mlon='+this.lng+'&quot;)\">OSM</button>'\n\t\t\t//+ ' <button onclick=\"window.open(&quot;https://geohashing.info/mobile/' + this.feature.get('date').split('-').join('/') + '/' + grat + '&quot;)\">Navigation compass</button> '\n\t\t\t);\n\t\toverlay.setPosition(this.feature.getGeometry().getCoordinates());\n\t},\n\thide: function(){\n\t\toverlay.setPosition(undefined);\n\t}\n};\n\nloadmap = function(){\n\tcontent = $('#popup-content');\n\tcloser = $('#popup-closer');\n\toverlay = new ol.Overlay({\n\t\telement: document.getElementById('popup'),\n\t\tautoPan: true,\n\t\tautoPanAnimation: {\n\t\t\tduration: 250\n\t\t}\n\t});\n\tcloser.click(function() {\n\t\toverlay.setPosition(undefined);\n\t\tcloser.blur();\n\t\treturn false;\n\t});\n\t\n\tvar defaultZoom = (settings.user.center != '0,0') ? settings.user.zoom : 2;\n\tview = new ol.View({\n\t\tcenter: ol.proj.transform(settings.user.center, 'EPSG:4326', 'EPSG:3857'),\n\t\tminZoom: settings.system.minZoom,\n\t\tzoom: defaultZoom,\n\t\tmaxZoom: settings.system.maxZoom,\n\t\trotation: 0,\n\t\tprojection: 'EPSG:3857'\n\t});\n\t\n\tgeolocation = new ol.Geolocation({\n\t\tprojection: view.getProjection()\n\t});\n\t\n\tif(settings.user.home == '0,0'){\n\t\tgeolocation.setTracking(true);\n\t\tif(settings.user.grid == '0,0'){\n\t\t\t$('#setHomeGridBoth').prop('checked', true);\n\t\t} else {\n\t\t\t$('#setHomeGridHome').prop('checked', true);\n\t\t}\n\t}\n\t\n\tgeolocation.on('change', function() {\n\t\thomeGrid(geolocation.getPosition());\n\t});\n\n\t//all available basemaps\n\tvar baseMaps = {\n\t\t'map': {\n\t\t\tsource: new ol.source.OSM(),\n\t\t\tname: 'OpenStreetMap'\n\t\t},\n\t\t'hyb': {\n\t\t\tsource : new ol.source.BingMaps({\n\t\t\t\tkey: settings.system.bingKey,\n\t\t\t\timagerySet: 'AerialWithLabels'\n\t\t\t}),\n\t\t\tname: 'Bing maps (Hybrid)'\n\t\t},\n\t\t'sat': {\n\t\t\tsource : new ol.source.BingMaps({\n\t\t\t\tkey: settings.system.bingKey,\n\t\t\t\timagerySet: 'Aerial'\n\t\t\t}),\n\t\t\tname: 'Bing maps (Satellite)'\n\t\t}\n\t};\n\tmapLayer = {\n\t\tlist: {},\n\t\tcurrent: settings.user.type,\n\t\tregister: function(id, layer, name) {\n\t\t\tthis.list[id] = layer;\n\t\t\taddLiAlpha('#mapControl', '<li onclick=\"javascript:mapLayer.load(\\'' + id + '\\')\"><input type=\"radio\" name=\"map\" value=\"' + id + '\" onchange=\"javascript:mapLayer.load(\\'' + id + '\\')\" id=\"map_' + id + '\" ' + ((this.current === id) ? 'checked=\"checked\"' : '') + '/> <label for=\"map_' + id + '\">' + name + '</label></li>');\n\t\t},\n\t\tload: function(id) {\n\t\t\tif (id !== this.current) {\n\t\t\t\tthis.list[id].setVisible(true); //show requested map\n\t\t\t\tthis.list[this.current].setVisible(false); //hide the visible map\n\t\t\t\tthis.current = id;\n\t\t\t\t$('#map_' + id).prop('checked', true);\n\t\t\t\tupdateUrl();\n\t\t\t}\n\t\t}\n\t};\n\n\tvar baseMapLayer = [];\n\tfor (var key in baseMaps) {\n\t\tvar newLayer = new ol.layer.Tile({\n\t\t\tsource: baseMaps[key].source,\n\t\t\tvisible: (mapLayer.current === key)\n\t\t});\n\t\tmapLayer.register(key, newLayer, baseMaps[key].name);\n\t\tbaseMapLayer.push(newLayer);\n\t}\n\t\n\tvar baseMap = new ol.layer.Group({\n\t\tlayers: baseMapLayer\n\t});\n\t\n\t//limit renderer when using twitter app on iOS (iPad, iPhone, iPod)\n\tif(navigator.userAgent.match(/Twitter for iP/i)){\n\t\trenderer = 'dom';\n\t\t$(window).resize(function(){\n\t\t\t$('#map').width($(window).width());\n\t\t\t$('#map').height($(window).height());\n\t\t\tmap.updateSize();\n\t\t});\n\t} else {\n\t\trenderer = ['canvas', 'dom', 'webgl'];\n\t}\n\tmap = new ol.Map({\n\t\ttarget: document.getElementById('map'),\n\t\tlayers: [ baseMap],\n\t\tview: view,\n\t\tcontrols: [\n\t\t\tnew ol.control.ScaleLine(),\n\t\t\tnew ol.control.Attribution({\n\t\t\t\tcollapsible: false\n\t\t\t})\n\t\t],\n\t\tinteractions: ol.interaction.defaults({\n\t\t\trotate: false,\n\t\t\taltShiftDragRotate: false,\n\t\t\tpinchRotate: false\n\t\t}),\n\t\toverlays: [overlay],\n\t\trenderer: renderer\n\t});\n\t\n\tmap.on('moveend', function(){\n\t\t$('#inputZoomLevel').val(view.getZoom());\n\t\tzoom.change();\n\t});\n\t\n\tmap.on('singleclick', function(evt) {\n\t\tvar feature = map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\n\t\t\treturn feature;\n\t\t});\n\t\tif(typeof feature !== 'undefined' && feature.get('date')){\n\t\t\tpopover.show(feature);\n\t\t} else {\n\t\t\thomeGrid(evt.coordinate);\n\t\t}\n\t});\n\t\n\tmap.on('pointermove', function(evt) {\n\t\tvar hit = map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\n\t\t\treturn feature.get('date');\n\t\t});\n\t\tmap.getTargetElement().style.cursor = hit ? 'pointer' : '';\n\t});\n};\n\nvar greybox = {\n\tisOpen: false,\n\topen: function(box){\n\t\t$.getJSON('/text/'+box, function(data){\n\t\t\t$('#greybox>div').attr('class', box);\n\t\t\t$('#greybox .title').html(data.title);\n\t\t\t$('#greybox .content').html(data.content);\n\t\t\t$(\"#greybox .content a[href^='http']\").attr('target','_blank');\n\t\t\t$('#greybox').fadeIn();\n\t\t\t$('#greybox div').slideDown();\n\t\t\t$('#greybox .content').scrollTop(0);\n\t\t\tgreybox.isOpen = true;\n\t\t});\n\t\treturn false;\n\t},\n\tclose: function(){\n\t\t$('#greybox>div').slideUp();\n\t\t$('#greybox').fadeOut();\n\t\t$('#greybox .closer').blur();\n\t\tgreybox.isOpen = false;\n\t}\n};\n\nvar gcookie = {\n\tset: function(){\n\t\t// Build the expiration date string:\n\t\tvar expiration_date = new Date();\n\t\tvar cookie_string = '';\n\t\texpiration_date.setFullYear(expiration_date.getFullYear() + 10);\n\t\t// Build the set-cookie string:\n\t\tsettings.user.center = ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326');\n\t\tsettings.user.zoom = view.getZoom();\n\t\tsettings.user.single = !$('#showWeek').is(':checked'); \n\t\tsettings.user.dayOf = $('#dayOfWeek').is(':checked') ? 'week' : 'month';\n\t\tsettings.user.type = $('input[name=map]:checked').val();\n\t\tsettings.user.controlsVisible = $('#controlsVisible').is(':checked');\n\t\tsettings.user.setHomeGrid = $('input[name=setHomeGrid]:checked').val();\n\t\tsettings.user.resetSetHomeGrid = $('#resetSetHomeGrid').is(':checked');\n\t\tcookie_string = \"config=\"+JSON.stringify(settings.user)+\";secure; path=/; expires=\" + expiration_date.toGMTString();\n\t\t// Create/update the cookie:\n\t\tdocument.cookie = cookie_string;\n\t\tgreybox.open('settings');\n\t},\n\tunset: function(){\n\t\tcookie_string = \"config=;secure ;path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT\";\n\t\tdocument.cookie = cookie_string;\n\t\twindow.alert('Your cookie is deleted');\n\t}\n};\n\nvar w30warning = {\n\ttoggle: function(){\n\t\tlng = settings.user.grid[0];\n\t\tif(lng < -29.0 || lng >= 179){\n\t\t\tvar date1 = new Date($('#dateControl .content.datepicker').datepicker('option', 'maxDate'));\n\t\t\tvar date2 = new Date($('#datepicker').val());\n\t\t\tvar timeDiff = Math.abs(date2.getTime() - date1.getTime());\n\t\t\tvar diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));\n\t\t\tif((diffDays === 0 || (diffDays < 7 && $('#showWeek').is(':checked')))){\n\t\t\t\tthis.show();\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\tshow: function(){\n\t\t$('#w30warning .date').html($('#dateControl .content.datepicker').datepicker('option', 'maxDate'));\n\t\t$('#w30warning').fadeIn();\n\t},\n\thide: function(){\n\t\t$('#w30warning').fadeOut();\n\t},\n\treset: function(){\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\tl = $('#controls').css('left');\n\t\t\tif(l === '0px'){\n\t\t\t\t$('#w30warning').css('left', '320px');\n\t\t\t\t$('#w30warning').css('padding-left', '0px');\n\t\t\t} else if (l === '-320px') {\n\t\t\t\t$('#w30warning').css('left', '0px');\n\t\t\t\t$('#w30warning').css('padding-left', '80px');\n\t\t\t}\n\t\t} else {\n\t\t\t$('#w30warning').css('left', '');\n\t\t\t$('#w30warning').css('padding-left', '');\n\t\t}\n\t}\n};\n"]}