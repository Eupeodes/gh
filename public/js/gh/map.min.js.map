{"version":3,"sources":["base.js"],"names":["map","view","settings","ol","xs","xt","xl","ys","yt","yl","gridLayer","gridVector","geolocation","mapLayer","content","closer","overlay","markerLayers","days","0","1","2","3","4","5","6","roundCoords","coords","decimals","toFixed","updateUrl","url","window","location","host","$","val","user","grid","proj","transform","getCenter","Math","round","zoom","value","is","protocol","history","replaceState","getUrl","select","document","execCommand","closeDisclaimer","expiration_date","Date","cookie_string","setTime","getTime","now","toGMTString","cookie","greybox","close","addLiAlpha","ul","li","added","each","this","text","toLowerCase","insertBefore","appendTo","controls","show","duration","animate","left","borderBottomRightRadius","width","height","paddingLeft","hide","toggle","l","css","change","slider","doZoom","to","lat","lng","lvl","center","reset","homeGrid","point","what","home","set","init","marker","get","prop","layer","removeLayer","source","Vector","addFeature","Feature","geometry","geom","Point","style","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","src","addLayer","getZoom","distance","dist","Sphere","haversineDistance","popover","coordinates","feature","geoName","getJSON","json","html","grat","name","id","getGeometry","getCoordinates","addClass","removeClass","x","toString","split","y","join","setPosition","undefined","isOpen","loadmap","Overlay","element","getElementById","autoPan","autoPanAnimation","click","blur","key","defaultZoom","baseMaps","View","minZoom","system","maxZoom","rotation","projection","Geolocation","getProjection","setTracking","on","getPosition","OSM","hyb","BingMaps","bingKey","imagerySet","sat","baseMapLayer","list","current","type","register","load","setVisible","newLayer","Tile","visible","push","baseMap","Group","layers","navigator","userAgent","match","renderer","resize","updateSize","Map","target","control","ScaleLine","Attribution","collapsible","interactions","interaction","defaults","rotate","altShiftDragRotate","pinchRotate","overlays","evt","forEachFeatureAtPixel","pixel","coordinate","hit","getTargetElement","cursor","open","box","data","attr","title","fadeIn","slideDown","scrollTop","slideUp","fadeOut","gcookie","setFullYear","getFullYear","single","dayOf","controlsVisible","setHomeGrid","resetSetHomeGrid","JSON","stringify","unset","alert","w30warning","timeDiff","diffDays","date1","datepicker","date2","abs","ceil","c","baseLat","floor","baseLng","latSign","lngSign","draw","length","drawLine","fill","Fill","color","weight","stroke","Stroke","points","i","LineString","curDate","date","force","keepPopover","Object","prototype","call","doDraw","day","getTimezoneOffset","getDay","getDate","bgColor","fgColor","s","west","parseFloat","east","global","refreshMaxDate","maxDate","setTimer","nextCheck","time","setTimeout","changeMonth","changeYear","dateFormat","showOtherMonths","selectOtherMonths","firstDay","minDate","altField","defaultDate","nextText","prevText","hideIfNoPrevNext","onSelect","min","max","slide","event","ui","hasClass","colorSet","stopPropagation","keyup","g","keyCode","which","niceScroll","showDisclaimer"],"mappings":"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","file":"map.min.js","sourcesContent":["/*\n * file:\t\tscript.js\n * author:\t\tMarten Tacoma\n * contents:\tall custom js\n */\n\nvar map, view, settings, ol, xs,xt,xl, ys,yt,yl, gridLayer, gridVector, geolocation, mapLayer, markerLayers = [], content, closer, overlay, days = {0:'Su', 1:'Mo', 2:'Tu', 3:'We', 4:'Th', 5:'Fr', 6:'Sa'};\n\nfunction roundCoords(coords, decimals){\n\treturn coords[1].toFixed(decimals)+','+coords[0].toFixed(decimals);\t\n}\n\nfunction updateUrl(){\n\tvar url = \"//\" + window.location.host\n\t\t+ '/t:' + $('input[name=map]:checked').val()\n\t\t+ '/' + $('#datepicker').val() \n\t\t+ '/g:' + roundCoords(settings.user.grid,1)\n\t\t+ '/c:' + roundCoords(ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326'), 3)\n\t\t+ '/z:' + Math.round(zoom.value);\n\tif(!$('#showWeek').is(':checked')){\n\t\turl = url + '/s';\n\t}\n\t$('#url').val(window.location.protocol + url);\n\tif($('#updateBar').is(':checked')){\n\t\twindow.history.replaceState({}, null, url);\n\t}\n}\n\nfunction getUrl(){\n\t$('#url').select();\n\tdocument.execCommand(\"copy\");\n}\n\nfunction closeDisclaimer(){\n\tvar expiration_date = new Date();\n\texpiration_date.setTime(expiration_date.getTime()+(30*24*60*60*1000));\n\tvar cookie_string = \"disclaimer=\"+(Date.now() / 1000 | 0)+\";secure; path=/; expires=\" + expiration_date.toGMTString();\n\tdocument.cookie = cookie_string;\n\tgreybox.close();\n}\n\n//insert li at the right alphabetical place in an ul\nfunction addLiAlpha(ul, li){\n\tvar added = false;\n\t$(ul+\" li\").each(function(){\n\t\tif($(this).text().toLowerCase() > $(li).text().toLowerCase()){\n\t\t\t$(li).insertBefore($(this));\n\t\t\tadded = true;\n\t\t\treturn false;\n\t\t}\n\t});\n\tif(!added){\n\t\t$(li).appendTo($(ul));\n\t}\n}\n\nvar controls = {\n\tshow: function(duration){\n\t\t$('#controls').animate({left:'0px'},duration);\n\t\t$('#controlsTop').animate({left:'0px',borderBottomRightRadius:0},duration);\n\t\t$('.ol-scale-line').animate({left:'328px'},duration);\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\t$('#w30warning').animate({left:'320px',paddingLeft:'0px'});\n\t\t}\n\t},\n\thide: function(){\n\t\t$('#controls').animate({left:'-320px'});\n\t\t$('#controlsTop').animate({left:'-242px',borderBottomRightRadius:5});\n\t\t$('.ol-scale-line').animate({left:'8px'});\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\t$('#w30warning').animate({left:'0px',paddingLeft:'80px'});\n\t\t}\n\t},\n\ttoggle: function(){\n\t\tl = $('#controls').css('left');\n\t\tif(l === '0px'){\n\t\t\tcontrols.hide();\n\t\t} else if (l === '-320px') {\n\t\t\tcontrols.show();\n\t\t}\n\t}\n};\n\nvar zoom = {\n\tvalue: settings.user.zoom,\n\tchange: function(){\n\t\tzoom.value = $('#inputZoomLevel').val();\n\t\tupdateUrl();\n\t\t$('#zoomControl .slider').slider('value', zoom.value);\n\t\tzoom.doZoom(zoom.value);\n\t},\n\tdoZoom: function(value){\n\t\tview.animate({zoom: value, duration:500});\n\t},\n\tto: function(lat,lng,lvl){\n\t\tview.animate({zoom: lvl, center: ol.proj.transform([lng,lat], 'EPSG:4326', 'EPSG:3857'), duration:500});\n\t},\n\treset: function(){\n\t\tview.animate({zoom: settings.user.zoom, center: ol.proj.transform(settings.user.center, 'EPSG:4326', 'EPSG:3857'), duration:500});\n\t}\n};\n\nfunction homeGrid(point){\n\tvar what = $('input[name=setHomeGrid]:checked').val();\n\tvar point = ol.proj.transform(point, 'EPSG:3857', 'EPSG:4326');\n\tswitch(what){\n\t\tcase 'home':\n\t\t\thome.set(point);\n\t\t\tbreak;\n\t\tcase 'grid':\n\t\t\tgrid.init(point);\n\t\t\tmarker.get(true);\n\t\t\tbreak;\n\t\tcase 'both':\n\t\t\thome.set(point);\n\t\t\tgrid.init(point);\n\t\t\tmarker.get(true);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t//do nothing\n\t}\n\tif($('#resetSetHomeGrid').is(':checked')){\n\t\t$('#setHomeGridNothing').prop('checked', true);\n\t}\n}\n\nvar home = {\n\tlayer: null,\n\tmarker: null,\n\tpoint: null,\n\tset: function(point){\n\t\tmap.removeLayer(home.layer);\n\t\twhile(point[0] > 180){\n\t\t\tpoint[0] -= 360;\n\t\t}\n\t\twhile(point[0] < -180){\n\t\t\tpoint[0] += 360;\n\t\t}\n\t\thome.point = point;\n\t\tsettings.user.home = point;\n\t\thome.marker = new ol.source.Vector({});\n\t\thome.marker.addFeature(new ol.Feature({geometry: new ol.geom.Point(ol.proj.transform(point, 'EPSG:4326', 'EPSG:3857'))}));\n\t\thome.layer = new ol.layer.Vector({\n\t\t\tsource: home.marker,\n\t\t\tstyle: new ol.style.Style({\n\t\t\t\timage: new ol.style.Icon({\n\t\t\t\t\tanchor: [16,16],\n\t\t\t\t\tanchorXUnits: 'pixels',\n\t\t\t\t\tanchorYUnits: 'pixels',\n\t\t\t\t\tsrc: '/img/marker.png'\n\t\t\t\t})\n\t\t\t})\n\t\t});\n\t\tmap.addLayer(home.layer);\n\t\tif(view.getZoom() === 2){\n\t\t\tzoom.to(point[1],point[0],settings.user.zoom);\n\t\t\tsettings.user.center = ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326');\n\t\t}\n\t\tupdateUrl();\n\t},\n\tdistance: function(location){\n\t\tif(home.point == null){\n\t\t\treturn '';\n\t\t}\n\t\tvar wgs84Sphere = new ol.Sphere(6378137);\n\t\tvar dist = wgs84Sphere.haversineDistance(home.point,location)/1000;\n\t\treturn dist.toFixed(2) + ' km / ' +(dist*0.621371).toFixed(2) + ' miles<br/>';\n\t}\n};\n\npopover = {\n\tlat: null,\n\tlng: null,\n\tcoordinates: null,\n\tfeature: null,\n\tgeoName: function(){\n\t\t$.getJSON(\n\t\t\t'//data.geohashing.info/geoName/'+this.lat+'/'+this.lng,\n\t\t\tfunction(json){\n\t\t\t\t$('#geoName').html(json.geoName);\n\t\t\t}\n\t\t);\n\t},\n\tshow: function(feature){\n\t\tthis.feature = feature;\n\t\tthis.coordinates = ol.proj.transform(feature.getGeometry().getCoordinates(), 'EPSG:3857', 'EPSG:4326');\n\t\tthis.lng = this.coordinates[0];\n\t\tthis.lat = this.coordinates[1];\n\t\tthis.geoName();\n\t\tif(this.feature.get('global')){\n\t\t\t$('#popup').addClass('global');\n\t\t\tvar name = 'Globalhash ' + feature.get('date');\n\t\t\tvar grat = 'global';\n\t\t\tvar id = this.feature.get('date') + '_global';\n\t\t} else {\n\t\t\t$('#popup').removeClass('global');\n\t\t\tvar x = this.lng.toString().split('.')[0];\n\t\t\tvar y = this.lat.toString().split('.')[0];\n\t\t\tvar grat = y + ',' + x;\n\t\t\tvar name = 'Geohash ' + this.feature.get('date') + ' ' + y + ' ' + x;\n\t\t\tvar id = this.feature.get('date') + '_' + y + '_' + x;\n\t\t}\n\t\tcontent.html('<strong>'+name+'</strong> <button onclick=\"window.open(&quot;https://geohashing.site/geohashing/'+id+'&quot;)\">Meetup</button><br />'+\n\t\t\tthis.lat.toFixed(5) + ', ' + this.lng.toFixed(5) + ' <button onclick=\"zoom.to('+this.lat+','+this.lng+', 15)\">Zoom in</button><br />' +\n\t\t\t'<span id=\"geoName\"><span style=\"color:silver;font-style:italic\">[A location name should appear here]</span></span><br/>' +\n\t\t\thome.distance(this.coordinates) + \n\t\t\t'<button onclick=\"window.open(&quot;https://data.geohashing.info/hash/' + this.feature.get('date').split('-').join('/') + '/' + grat + '.gpx&quot;)\">GPX</button> <button onclick=\"window.open(&quot;http://geo.crox.net/poster/'+id+'&quot;)\">Poster</button> <button onclick=\"window.open(&quot;http://www.geocaching.com/seek/nearest.aspx?origin_lat='+this.lat+'&amp;origin_long='+this.lng+'&quot;)\">Nearby geocaches</button>'\n\t\t\t+ '<button onclick=\"window.open(&quot;https://maps.google.com/?q='+this.lat+','+this.lng+'&quot;)\">Google Maps</button>'\n\t\t\t+ ' <button onclick=\"window.open(&quot;http://www.openstreetmap.org/index.html?mlat='+this.lat+'&mlon='+this.lng+'&quot;)\">OSM</button>'\n\t\t\t//+ ' <button onclick=\"window.open(&quot;https://geohashing.info/mobile/' + this.feature.get('date').split('-').join('/') + '/' + grat + '&quot;)\">Navigation compass</button> '\n\t\t\t);\n\t\toverlay.setPosition(this.feature.getGeometry().getCoordinates());\n\t},\n\thide: function(){\n\t\toverlay.setPosition(undefined);\n\t}\n};\n\nloadmap = function(){\n\tcontent = $('#popup-content');\n\tcloser = $('#popup-closer');\n\toverlay = new ol.Overlay({\n\t\telement: document.getElementById('popup'),\n\t\tautoPan: true,\n\t\tautoPanAnimation: {\n\t\t\tduration: 250\n\t\t}\n\t});\n\tcloser.click(function() {\n\t\toverlay.setPosition(undefined);\n\t\tcloser.blur();\n\t\treturn false;\n\t});\n\t\n\tvar defaultZoom = (settings.user.center != '0,0') ? settings.user.zoom : 2;\n\tview = new ol.View({\n\t\tcenter: ol.proj.transform(settings.user.center, 'EPSG:4326', 'EPSG:3857'),\n\t\tminZoom: settings.system.minZoom,\n\t\tzoom: defaultZoom,\n\t\tmaxZoom: settings.system.maxZoom,\n\t\trotation: 0,\n\t\tprojection: 'EPSG:3857'\n\t});\n\t\n\tgeolocation = new ol.Geolocation({\n\t\tprojection: view.getProjection()\n\t});\n\t\n\tif(settings.user.home == '0,0'){\n\t\tgeolocation.setTracking(true);\n\t\tif(settings.user.grid == '0,0'){\n\t\t\t$('#setHomeGridBoth').prop('checked', true);\n\t\t} else {\n\t\t\t$('#setHomeGridHome').prop('checked', true);\n\t\t}\n\t}\n\t\n\tgeolocation.on('change', function() {\n\t\thomeGrid(geolocation.getPosition());\n\t});\n\n\t//all available basemaps\n\tvar baseMaps = {\n\t\t'map': {\n\t\t\tsource: new ol.source.OSM(),\n\t\t\tname: 'OpenStreetMap'\n\t\t},\n\t\t'hyb': {\n\t\t\tsource : new ol.source.BingMaps({\n\t\t\t\tkey: settings.system.bingKey,\n\t\t\t\timagerySet: 'AerialWithLabels'\n\t\t\t}),\n\t\t\tname: 'Bing maps (Hybrid)'\n\t\t},\n\t\t'sat': {\n\t\t\tsource : new ol.source.BingMaps({\n\t\t\t\tkey: settings.system.bingKey,\n\t\t\t\timagerySet: 'Aerial'\n\t\t\t}),\n\t\t\tname: 'Bing maps (Satellite)'\n\t\t}\n\t};\n\tmapLayer = {\n\t\tlist: {},\n\t\tcurrent: settings.user.type,\n\t\tregister: function(id, layer, name) {\n\t\t\tthis.list[id] = layer;\n\t\t\taddLiAlpha('#mapControl', '<li onclick=\"javascript:mapLayer.load(\\'' + id + '\\')\"><input type=\"radio\" name=\"map\" value=\"' + id + '\" onchange=\"javascript:mapLayer.load(\\'' + id + '\\')\" id=\"map_' + id + '\" ' + ((this.current === id) ? 'checked=\"checked\"' : '') + '/> <label for=\"map_' + id + '\">' + name + '</label></li>');\n\t\t},\n\t\tload: function(id) {\n\t\t\tif (id !== this.current) {\n\t\t\t\tthis.list[id].setVisible(true); //show requested map\n\t\t\t\tthis.list[this.current].setVisible(false); //hide the visible map\n\t\t\t\tthis.current = id;\n\t\t\t\t$('#map_' + id).prop('checked', true);\n\t\t\t\tupdateUrl();\n\t\t\t}\n\t\t}\n\t};\n\n\tvar baseMapLayer = [];\n\tfor (var key in baseMaps) {\n\t\tvar newLayer = new ol.layer.Tile({\n\t\t\tsource: baseMaps[key].source,\n\t\t\tvisible: (mapLayer.current === key)\n\t\t});\n\t\tmapLayer.register(key, newLayer, baseMaps[key].name);\n\t\tbaseMapLayer.push(newLayer);\n\t}\n\t\n\tvar baseMap = new ol.layer.Group({\n\t\tlayers: baseMapLayer\n\t});\n\t\n\t//limit renderer when using twitter app on iOS (iPad, iPhone, iPod)\n\tif(navigator.userAgent.match(/Twitter for iP/i)){\n\t\trenderer = 'dom';\n\t\t$(window).resize(function(){\n\t\t\t$('#map').width($(window).width());\n\t\t\t$('#map').height($(window).height());\n\t\t\tmap.updateSize();\n\t\t});\n\t} else {\n\t\trenderer = ['canvas', 'dom', 'webgl'];\n\t}\n\tmap = new ol.Map({\n\t\ttarget: document.getElementById('map'),\n\t\tlayers: [ baseMap],\n\t\tview: view,\n\t\tcontrols: [\n\t\t\tnew ol.control.ScaleLine(),\n\t\t\tnew ol.control.Attribution({\n\t\t\t\tcollapsible: false\n\t\t\t})\n\t\t],\n\t\tinteractions: ol.interaction.defaults({\n\t\t\trotate: false,\n\t\t\taltShiftDragRotate: false,\n\t\t\tpinchRotate: false\n\t\t}),\n\t\toverlays: [overlay],\n\t\trenderer: renderer\n\t});\n\t\n\tmap.on('moveend', function(){\n\t\t$('#inputZoomLevel').val(view.getZoom());\n\t\tzoom.change();\n\t});\n\t\n\tmap.on('singleclick', function(evt) {\n\t\tvar feature = map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\n\t\t\treturn feature;\n\t\t});\n\t\tif(typeof feature !== 'undefined' && feature.get('date')){\n\t\t\tpopover.show(feature);\n\t\t} else {\n\t\t\thomeGrid(evt.coordinate);\n\t\t}\n\t});\n\t\n\tmap.on('pointermove', function(evt) {\n\t\tvar hit = map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\n\t\t\treturn feature.get('date');\n\t\t});\n\t\tmap.getTargetElement().style.cursor = hit ? 'pointer' : '';\n\t});\n};\n\nvar greybox = {\n\tisOpen: false,\n\topen: function(box){\n\t\t$.getJSON('/text/'+box, function(data){\n\t\t\t$('#greybox>div').attr('class', box);\n\t\t\t$('#greybox .title').html(data.title);\n\t\t\t$('#greybox .content').html(data.content);\n\t\t\t$(\"#greybox .content a[href^='http']\").attr('target','_blank');\n\t\t\t$('#greybox').fadeIn();\n\t\t\t$('#greybox div').slideDown();\n\t\t\t$('#greybox .content').scrollTop(0);\n\t\t\tgreybox.isOpen = true;\n\t\t});\n\t\treturn false;\n\t},\n\tclose: function(){\n\t\t$('#greybox>div').slideUp();\n\t\t$('#greybox').fadeOut();\n\t\t$('#greybox .closer').blur();\n\t\tgreybox.isOpen = false;\n\t}\n};\n\nvar gcookie = {\n\tset: function(){\n\t\t// Build the expiration date string:\n\t\tvar expiration_date = new Date();\n\t\tvar cookie_string = '';\n\t\texpiration_date.setFullYear(expiration_date.getFullYear() + 10);\n\t\t// Build the set-cookie string:\n\t\tsettings.user.center = ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326');\n\t\tsettings.user.zoom = view.getZoom();\n\t\tsettings.user.single = !$('#showWeek').is(':checked'); \n\t\tsettings.user.dayOf = $('#dayOfWeek').is(':checked') ? 'week' : 'month';\n\t\tsettings.user.type = $('input[name=map]:checked').val();\n\t\tsettings.user.controlsVisible = $('#controlsVisible').is(':checked');\n\t\tsettings.user.setHomeGrid = $('input[name=setHomeGrid]:checked').val();\n\t\tsettings.user.resetSetHomeGrid = $('#resetSetHomeGrid').is(':checked');\n\t\tcookie_string = \"config=\"+JSON.stringify(settings.user)+\";secure; path=/; expires=\" + expiration_date.toGMTString();\n\t\t// Create/update the cookie:\n\t\tdocument.cookie = cookie_string;\n\t\tgreybox.open('settings');\n\t},\n\tunset: function(){\n\t\tcookie_string = \"config=;secure ;path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT\";\n\t\tdocument.cookie = cookie_string;\n\t\twindow.alert('Your cookie is deleted');\n\t}\n};\n\nvar w30warning = {\n\ttoggle: function(){\n\t\tlng = settings.user.grid[0];\n\t\tif(lng < -29.0 || lng >= 179){\n\t\t\tvar date1 = new Date($('#dateControl .content.datepicker').datepicker('option', 'maxDate'));\n\t\t\tvar date2 = new Date($('#datepicker').val());\n\t\t\tvar timeDiff = Math.abs(date2.getTime() - date1.getTime());\n\t\t\tvar diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));\n\t\t\tif((diffDays === 0 || (diffDays < 7 && $('#showWeek').is(':checked')))){\n\t\t\t\tthis.show();\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\tshow: function(){\n\t\t$('#w30warning .date').html($('#dateControl .content.datepicker').datepicker('option', 'maxDate'));\n\t\t$('#w30warning').fadeIn();\n\t},\n\thide: function(){\n\t\t$('#w30warning').fadeOut();\n\t},\n\treset: function(){\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\tl = $('#controls').css('left');\n\t\t\tif(l === '0px'){\n\t\t\t\t$('#w30warning').css('left', '320px');\n\t\t\t\t$('#w30warning').css('padding-left', '0px');\n\t\t\t} else if (l === '-320px') {\n\t\t\t\t$('#w30warning').css('left', '0px');\n\t\t\t\t$('#w30warning').css('padding-left', '80px');\n\t\t\t}\n\t\t} else {\n\t\t\t$('#w30warning').css('left', '');\n\t\t\t$('#w30warning').css('padding-left', '');\n\t\t}\n\t}\n};\n"]}