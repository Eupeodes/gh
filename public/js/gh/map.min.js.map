{"version":3,"sources":["base.js"],"names":["map","view","settings","ol","xs","xt","xl","ys","yt","yl","gridLayer","gridVector","geolocation","mapLayer","content","closer","overlay","markerLayers","days","0","1","2","3","4","5","6","roundCoords","coords","decimals","toFixed","updateUrl","url","window","location","host","$","val","user","grid","proj","transform","getCenter","Math","round","zoom","value","is","protocol","history","replaceState","getUrl","select","document","execCommand","closeDisclaimer","expiration_date","Date","setTime","getTime","cookie_string","now","toGMTString","cookie","greybox","close","addLiAlpha","ul","li","added","each","this","text","toLowerCase","insertBefore","appendTo","controls","show","duration","animate","left","borderBottomRightRadius","width","height","paddingLeft","hide","toggle","l","css","change","slider","doZoom","to","lat","lng","lvl","center","reset","homeGrid","point","what","home","set","init","marker","get","prop","layer","removeLayer","source","Vector","addFeature","Feature","geometry","geom","Point","style","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","src","addLayer","getZoom","distance","dist","Sphere","haversineDistance","popover","coordinates","feature","geoName","getJSON","json","html","getGeometry","getCoordinates","addClass","name","grat","id","removeClass","x","toString","split","y","join","setPosition","undefined","isOpen","loadmap","Overlay","element","getElementById","autoPan","autoPanAnimation","click","blur","defaultZoom","View","minZoom","system","maxZoom","rotation","projection","Geolocation","getProjection","setTracking","on","getPosition","baseMaps","OSM","hyb","BingMaps","key","bingKey","imagerySet","sat","list","current","type","register","load","setVisible","baseMapLayer","newLayer","Tile","visible","push","baseMap","Group","layers","navigator","userAgent","match","renderer","resize","updateSize","Map","target","control","ScaleLine","Attribution","collapsible","interactions","interaction","defaults","rotate","altShiftDragRotate","pinchRotate","overlays","evt","forEachFeatureAtPixel","pixel","coordinate","hit","getTargetElement","cursor","open","box","data","attr","title","fadeIn","slideDown","scrollTop","slideUp","fadeOut","gcookie","setFullYear","getFullYear","single","dayOf","controlsVisible","resetSetHomeGrid","JSON","stringify","unset","alert","w30warning","date1","datepicker","date2","timeDiff","abs","diffDays","ceil","c","baseLat","floor","baseLng","latSign","lngSign","draw","length","drawLine","fill","Fill","color","weight","stroke","Stroke","points","i","LineString","curDate","date","force","keepPopover","Object","prototype","call","doDraw","getTimezoneOffset","day","getDay","getDate","bgColor","fgColor","s","west","parseFloat","east","global","refreshMaxDate","maxDate","setTimer","nextCheck","time","setTimeout","changeMonth","changeYear","dateFormat","showOtherMonths","selectOtherMonths","firstDay","minDate","altField","defaultDate","nextText","prevText","hideIfNoPrevNext","onSelect","min","max","slide","event","ui","hasClass","colorSet","stopPropagation","keyup","g","keyCode","which","niceScroll","showDisclaimer"],"mappings":"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","file":"map.min.js","sourcesContent":["/*\n * file:\t\tscript.js\n * author:\t\tMarten Tacoma\n * contents:\tall custom js\n */\n\nvar map, view, settings, ol, xs,xt,xl, ys,yt,yl, gridLayer, gridVector, geolocation, mapLayer, markerLayers = [], content, closer, overlay, days = {0:'Su', 1:'Mo', 2:'Tu', 3:'We', 4:'Th', 5:'Fr', 6:'Sa'};\n\nfunction roundCoords(coords, decimals){\n\treturn coords[1].toFixed(decimals)+','+coords[0].toFixed(decimals);\t\n}\n\nfunction updateUrl(){\n\tvar url = \"//\" + window.location.host\n\t\t+ '/t:' + $('input[name=map]:checked').val()\n\t\t+ '/' + $('#datepicker').val() \n\t\t+ '/g:' + roundCoords(settings.user.grid,1)\n\t\t+ '/c:' + roundCoords(ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326'), 3)\n\t\t+ '/z:' + Math.round(zoom.value);\n\tif(!$('#showWeek').is(':checked')){\n\t\turl = url + '/s';\n\t}\n\t$('#url').val(window.location.protocol + url);\n\tif($('#updateBar').is(':checked')){\n\t\twindow.history.replaceState({}, null, url);\n\t}\n}\n\nfunction getUrl(){\n\t$('#url').select();\n\tdocument.execCommand(\"copy\");\n}\n\nfunction closeDisclaimer(){\n\tvar expiration_date = new Date();\n\texpiration_date.setTime(expiration_date.getTime()+(30*24*60*60*1000));\n\tvar cookie_string = \"disclaimer=\"+(Date.now() / 1000 | 0)+\";secure; path=/; expires=\" + expiration_date.toGMTString();\n\tdocument.cookie = cookie_string;\n\tgreybox.close();\n}\n\n//insert li at the right alphabetical place in an ul\nfunction addLiAlpha(ul, li){\n\tvar added = false;\n\t$(ul+\" li\").each(function(){\n\t\tif($(this).text().toLowerCase() > $(li).text().toLowerCase()){\n\t\t\t$(li).insertBefore($(this));\n\t\t\tadded = true;\n\t\t\treturn false;\n\t\t}\n\t});\n\tif(!added){\n\t\t$(li).appendTo($(ul));\n\t}\n}\n\nvar controls = {\n\tshow: function(duration){\n\t\t$('#controls').animate({left:'0px'},duration);\n\t\t$('#controlsTop').animate({left:'0px',borderBottomRightRadius:0},duration);\n\t\t$('.ol-scale-line').animate({left:'328px'},duration);\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\t$('#w30warning').animate({left:'320px',paddingLeft:'0px'});\n\t\t}\n\t},\n\thide: function(){\n\t\t$('#controls').animate({left:'-320px'});\n\t\t$('#controlsTop').animate({left:'-242px',borderBottomRightRadius:5});\n\t\t$('.ol-scale-line').animate({left:'8px'});\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\t$('#w30warning').animate({left:'0px',paddingLeft:'80px'});\n\t\t}\n\t},\n\ttoggle: function(){\n\t\tl = $('#controls').css('left');\n\t\tif(l === '0px'){\n\t\t\tcontrols.hide();\n\t\t} else if (l === '-320px') {\n\t\t\tcontrols.show();\n\t\t}\n\t}\n};\n\nvar zoom = {\n\tvalue: settings.user.zoom,\n\tchange: function(){\n\t\tzoom.value = $('#inputZoomLevel').val();\n\t\tupdateUrl();\n\t\t$('#zoomControl .slider').slider('value', zoom.value);\n\t\tzoom.doZoom(zoom.value);\n\t},\n\tdoZoom: function(value){\n\t\tview.animate({zoom: value, duration:500});\n\t},\n\tto: function(lat,lng,lvl){\n\t\tview.animate({zoom: lvl, center: ol.proj.transform([lng,lat], 'EPSG:4326', 'EPSG:3857'), duration:500});\n\t},\n\treset: function(){\n\t\tview.animate({zoom: settings.user.zoom, center: ol.proj.transform(settings.user.center, 'EPSG:4326', 'EPSG:3857'), duration:500});\n\t}\n};\n\nfunction homeGrid(point){\n\tvar what = $('input[name=setHomeGrid]:checked').val();\n\tvar point = ol.proj.transform(point, 'EPSG:3857', 'EPSG:4326');\n\tswitch(what){\n\t\tcase 'home':\n\t\t\thome.set(point);\n\t\t\tbreak;\n\t\tcase 'grid':\n\t\t\tgrid.init(point);\n\t\t\tmarker.get(true);\n\t\t\tbreak;\n\t\tcase 'both':\n\t\t\thome.set(point);\n\t\t\tgrid.init(point);\n\t\t\tmarker.get(true);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t//do nothing\n\t}\n\tif($('#resetSetHomeGrid').is(':checked')){\n\t\t$('#setHomeGridNothing').prop('checked', true);\n\t}\n}\n\nvar home = {\n\tlayer: null,\n\tmarker: null,\n\tpoint: null,\n\tset: function(point){\n\t\tmap.removeLayer(home.layer);\n\t\twhile(point[0] > 180){\n\t\t\tpoint[0] -= 360;\n\t\t}\n\t\twhile(point[0] < -180){\n\t\t\tpoint[0] += 360;\n\t\t}\n\t\thome.point = point;\n\t\tsettings.user.home = point;\n\t\thome.marker = new ol.source.Vector({});\n\t\thome.marker.addFeature(new ol.Feature({geometry: new ol.geom.Point(ol.proj.transform(point, 'EPSG:4326', 'EPSG:3857'))}));\n\t\thome.layer = new ol.layer.Vector({\n\t\t\tsource: home.marker,\n\t\t\tstyle: new ol.style.Style({\n\t\t\t\timage: new ol.style.Icon({\n\t\t\t\t\tanchor: [16,16],\n\t\t\t\t\tanchorXUnits: 'pixels',\n\t\t\t\t\tanchorYUnits: 'pixels',\n\t\t\t\t\tsrc: '/img/marker.png'\n\t\t\t\t})\n\t\t\t})\n\t\t});\n\t\tmap.addLayer(home.layer);\n\t\tif(view.getZoom() === 2){\n\t\t\tzoom.to(point[1],point[0],settings.user.zoom);\n\t\t\tsettings.user.center = ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326');\n\t\t}\n\t\tupdateUrl();\n\t},\n\tdistance: function(location){\n\t\tif(home.point == null){\n\t\t\treturn '';\n\t\t}\n\t\tvar wgs84Sphere = new ol.Sphere(6378137);\n\t\tvar dist = wgs84Sphere.haversineDistance(home.point,location)/1000;\n\t\treturn dist.toFixed(2) + ' km / ' +(dist*0.621371).toFixed(2) + ' miles<br/>';\n\t}\n};\n\npopover = {\n\tlat: null,\n\tlng: null,\n\tcoordinates: null,\n\tfeature: null,\n\tgeoName: function(){\n\t\t$.getJSON(\n\t\t\t'//data.geohashing.info/geoName/'+this.lat+'/'+this.lng,\n\t\t\tfunction(json){\n\t\t\t\t$('#geoName').html(json.geoName);\n\t\t\t}\n\t\t);\n\t},\n\tshow: function(feature){\n\t\tthis.feature = feature;\n\t\tthis.coordinates = ol.proj.transform(feature.getGeometry().getCoordinates(), 'EPSG:3857', 'EPSG:4326');\n\t\tthis.lng = this.coordinates[0];\n\t\tthis.lat = this.coordinates[1];\n\t\tthis.geoName();\n\t\tif(this.feature.get('global')){\n\t\t\t$('#popup').addClass('global');\n\t\t\tvar name = 'Globalhash ' + feature.get('date');\n\t\t\tvar grat = 'global';\n\t\t\tvar id = this.feature.get('date') + '_global';\n\t\t} else {\n\t\t\t$('#popup').removeClass('global');\n\t\t\tvar x = this.lng.toString().split('.')[0];\n\t\t\tvar y = this.lat.toString().split('.')[0];\n\t\t\tvar grat = y + ',' + x;\n\t\t\tvar name = 'Geohash ' + this.feature.get('date') + ' ' + y + ' ' + x;\n\t\t\tvar id = this.feature.get('date') + '_' + y + '_' + x;\n\t\t}\n\t\tcontent.html('<strong>'+name+'</strong> <button onclick=\"window.open(&quot;https://geohashing.site/geohashing/'+id+'&quot;)\">Meetup</button><br />'+\n\t\t\tthis.lat.toFixed(8) + ', ' + this.lng.toFixed(8) + ' <button onclick=\"zoom.to('+this.lat+','+this.lng+', 15)\">Zoom in</button><br />' +\n\t\t\t'<span id=\"geoName\"><span style=\"color:silver;font-style:italic\">[A location name should appear here]</span></span><br/>' +\n\t\t\thome.distance(this.coordinates) + \n\t\t\t'<button onclick=\"window.open(&quot;https://data.geohashing.info/hash/' + this.feature.get('date').split('-').join('/') + '/' + grat + '.gpx&quot;)\">GPX</button> <button onclick=\"window.open(&quot;http://geo.crox.net/poster/'+id+'&quot;)\">Poster</button> <button onclick=\"window.open(&quot;http://www.geocaching.com/seek/nearest.aspx?origin_lat='+this.lat+'&amp;origin_long='+this.lng+'&quot;)\">Nearby geocaches</button>'\n\t\t\t+ '<button onclick=\"window.open(&quot;https://maps.google.com/?q='+this.lat+','+this.lng+'&quot;)\">Google Maps</button>'\n\t\t\t+ ' <button onclick=\"window.open(&quot;https://geohashing.info/mobile/' + this.feature.get('date').split('-').join('/') + '/' + grat + '&quot;)\">Navigation compass</button> '\n\t\t\t);\n\t\toverlay.setPosition(this.feature.getGeometry().getCoordinates());\n\t},\n\thide: function(){\n\t\toverlay.setPosition(undefined);\n\t}\n};\n\nloadmap = function(){\n\tcontent = $('#popup-content');\n\tcloser = $('#popup-closer');\n\toverlay = new ol.Overlay({\n\t\telement: document.getElementById('popup'),\n\t\tautoPan: true,\n\t\tautoPanAnimation: {\n\t\t\tduration: 250\n\t\t}\n\t});\n\tcloser.click(function() {\n\t\toverlay.setPosition(undefined);\n\t\tcloser.blur();\n\t\treturn false;\n\t});\n\t\n\tvar defaultZoom = (settings.user.center != '0,0') ? settings.user.zoom : 2;\n\tview = new ol.View({\n\t\tcenter: ol.proj.transform(settings.user.center, 'EPSG:4326', 'EPSG:3857'),\n\t\tminZoom: settings.system.minZoom,\n\t\tzoom: defaultZoom,\n\t\tmaxZoom: settings.system.maxZoom,\n\t\trotation: 0,\n\t\tprojection: 'EPSG:3857'\n\t});\n\t\n\tgeolocation = new ol.Geolocation({\n\t\tprojection: view.getProjection()\n\t});\n\t\n\tif(settings.user.home == '0,0'){\n\t\tgeolocation.setTracking(true);\n\t\tif(settings.user.grid == '0,0'){\n\t\t\t$('#setHomeGridBoth').prop('checked', true);\n\t\t} else {\n\t\t\t$('#setHomeGridHome').prop('checked', true);\n\t\t}\n\t}\n\t\n\tgeolocation.on('change', function() {\n\t\thomeGrid(geolocation.getPosition());\n\t});\n\n\t//all available basemaps\n\tvar baseMaps = {\n\t\t'map': {\n\t\t\tsource: new ol.source.OSM(),\n\t\t\tname: 'OpenStreetMap'\n\t\t},\n\t\t'hyb': {\n\t\t\tsource : new ol.source.BingMaps({\n\t\t\t\tkey: settings.system.bingKey,\n\t\t\t\timagerySet: 'AerialWithLabels'\n\t\t\t}),\n\t\t\tname: 'Bing maps (Hybrid)'\n\t\t},\n\t\t'sat': {\n\t\t\tsource : new ol.source.BingMaps({\n\t\t\t\tkey: settings.system.bingKey,\n\t\t\t\timagerySet: 'Aerial'\n\t\t\t}),\n\t\t\tname: 'Bing maps (Satellite)'\n\t\t}\n\t};\n\tmapLayer = {\n\t\tlist: {},\n\t\tcurrent: settings.user.type,\n\t\tregister: function(id, layer, name) {\n\t\t\tthis.list[id] = layer;\n\t\t\taddLiAlpha('#mapControl', '<li onclick=\"javascript:mapLayer.load(\\'' + id + '\\')\"><input type=\"radio\" name=\"map\" value=\"' + id + '\" onchange=\"javascript:mapLayer.load(\\'' + id + '\\')\" id=\"map_' + id + '\" ' + ((this.current === id) ? 'checked=\"checked\"' : '') + '/> <label for=\"map_' + id + '\">' + name + '</label></li>');\n\t\t},\n\t\tload: function(id) {\n\t\t\tif (id !== this.current) {\n\t\t\t\tthis.list[id].setVisible(true); //show requested map\n\t\t\t\tthis.list[this.current].setVisible(false); //hide the visible map\n\t\t\t\tthis.current = id;\n\t\t\t\t$('#map_' + id).prop('checked', true);\n\t\t\t\tupdateUrl();\n\t\t\t}\n\t\t}\n\t};\n\n\tvar baseMapLayer = [];\n\tfor (var key in baseMaps) {\n\t\tvar newLayer = new ol.layer.Tile({\n\t\t\tsource: baseMaps[key].source,\n\t\t\tvisible: (mapLayer.current === key)\n\t\t});\n\t\tmapLayer.register(key, newLayer, baseMaps[key].name);\n\t\tbaseMapLayer.push(newLayer);\n\t}\n\t\n\tvar baseMap = new ol.layer.Group({\n\t\tlayers: baseMapLayer\n\t});\n\t\n\t//limit renderer when using twitter app on iOS (iPad, iPhone, iPod)\n\tif(navigator.userAgent.match(/Twitter for iP/i)){\n\t\trenderer = 'dom';\n\t\t$(window).resize(function(){\n\t\t\t$('#map').width($(window).width());\n\t\t\t$('#map').height($(window).height());\n\t\t\tmap.updateSize();\n\t\t});\n\t} else {\n\t\trenderer = ['canvas', 'dom', 'webgl'];\n\t}\n\tmap = new ol.Map({\n\t\ttarget: document.getElementById('map'),\n\t\tlayers: [ baseMap],\n\t\tview: view,\n\t\tcontrols: [\n\t\t\tnew ol.control.ScaleLine(),\n\t\t\tnew ol.control.Attribution({\n\t\t\t\tcollapsible: false\n\t\t\t})\n\t\t],\n\t\tinteractions: ol.interaction.defaults({\n\t\t\trotate: false,\n\t\t\taltShiftDragRotate: false,\n\t\t\tpinchRotate: false\n\t\t}),\n\t\toverlays: [overlay],\n\t\trenderer: renderer\n\t});\n\t\n\tmap.on('moveend', function(){\n\t\t$('#inputZoomLevel').val(view.getZoom());\n\t\tzoom.change();\n\t});\n\t\n\tmap.on('singleclick', function(evt) {\n\t\tvar feature = map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\n\t\t\treturn feature;\n\t\t});\n\t\tif(typeof feature !== 'undefined' && feature.get('date')){\n\t\t\tpopover.show(feature);\n\t\t} else {\n\t\t\thomeGrid(evt.coordinate);\n\t\t}\n\t});\n\t\n\tmap.on('pointermove', function(evt) {\n\t\tvar hit = map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\n\t\t\treturn feature.get('date');\n\t\t});\n\t\tmap.getTargetElement().style.cursor = hit ? 'pointer' : '';\n\t});\n};\n\nvar greybox = {\n\tisOpen: false,\n\topen: function(box){\n\t\t$.getJSON('/text/'+box, function(data){\n\t\t\t$('#greybox>div').attr('class', box);\n\t\t\t$('#greybox .title').html(data.title);\n\t\t\t$('#greybox .content').html(data.content);\n\t\t\t$(\"#greybox .content a[href^='http']\").attr('target','_blank');\n\t\t\t$('#greybox').fadeIn();\n\t\t\t$('#greybox div').slideDown();\n\t\t\t$('#greybox .content').scrollTop(0);\n\t\t\tgreybox.isOpen = true;\n\t\t});\n\t\treturn false;\n\t},\n\tclose: function(){\n\t\t$('#greybox>div').slideUp();\n\t\t$('#greybox').fadeOut();\n\t\t$('#greybox .closer').blur();\n\t\tgreybox.isOpen = false;\n\t}\n};\n\nvar gcookie = {\n\tset: function(){\n\t\t// Build the expiration date string:\n\t\tvar expiration_date = new Date();\n\t\tvar cookie_string = '';\n\t\texpiration_date.setFullYear(expiration_date.getFullYear() + 10);\n\t\t// Build the set-cookie string:\n\t\tsettings.user.center = ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326');\n\t\tsettings.user.zoom = view.getZoom();\n\t\tsettings.user.single = !$('#showWeek').is(':checked'); \n\t\tsettings.user.dayOf = $('#dayOfWeek').is(':checked') ? 'week' : 'month';\n\t\tsettings.user.type = $('input[name=map]:checked').val();\n\t\tsettings.user.controlsVisible = $('#controlsVisible').is(':checked');\n\t\tsettings.user.resetSetHomeGrid = $('#resetSetHomeGrid').is(':checked');\n\t\tcookie_string = \"config=\"+JSON.stringify(settings.user)+\";secure; path=/; expires=\" + expiration_date.toGMTString();\n\t\t// Create/update the cookie:\n\t\tdocument.cookie = cookie_string;\n\t\tgreybox.open('settings');\n\t},\n\tunset: function(){\n\t\tcookie_string = \"config=;secure ;path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT\";\n\t\tdocument.cookie = cookie_string;\n\t\twindow.alert('Your cookie is deleted');\n\t}\n};\n\nvar w30warning = {\n\ttoggle: function(){\n\t\tlng = settings.user.grid[0];\n\t\tif(lng < -29.0 || lng >= 179){\n\t\t\tvar date1 = new Date($('#dateControl .content.datepicker').datepicker('option', 'maxDate'));\n\t\t\tvar date2 = new Date($('#datepicker').val());\n\t\t\tvar timeDiff = Math.abs(date2.getTime() - date1.getTime());\n\t\t\tvar diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));\n\t\t\tif((diffDays === 0 || (diffDays < 7 && $('#showWeek').is(':checked')))){\n\t\t\t\tthis.show();\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\tshow: function(){\n\t\t$('#w30warning .date').html($('#dateControl .content.datepicker').datepicker('option', 'maxDate'));\n\t\t$('#w30warning').fadeIn();\n\t},\n\thide: function(){\n\t\t$('#w30warning').fadeOut();\n\t},\n\treset: function(){\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\tl = $('#controls').css('left');\n\t\t\tif(l === '0px'){\n\t\t\t\t$('#w30warning').css('left', '320px');\n\t\t\t\t$('#w30warning').css('padding-left', '0px');\n\t\t\t} else if (l === '-320px') {\n\t\t\t\t$('#w30warning').css('left', '0px');\n\t\t\t\t$('#w30warning').css('padding-left', '80px');\n\t\t\t}\n\t\t} else {\n\t\t\t$('#w30warning').css('left', '');\n\t\t\t$('#w30warning').css('padding-left', '');\n\t\t}\n\t}\n};\n"]}