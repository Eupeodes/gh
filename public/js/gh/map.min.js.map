{"version":3,"sources":["base.js"],"names":["map","view","settings","ol","xs","xt","xl","ys","yt","yl","gridLayer","gridVector","geolocation","mapLayer","content","closer","overlay","markerLayers","days","0","1","2","3","4","5","6","closeDisclaimer","expiration_date","Date","setTime","getTime","cookie_string","now","toGMTString","document","cookie","greybox","close","addLiAlpha","ul","li","added","$","each","this","text","toLowerCase","insertBefore","appendTo","controls","show","duration","animate","left","borderBottomRightRadius","window","width","height","paddingLeft","hide","toggle","l","css","zoom","value","user","change","val","slider","doZoom","to","lat","lng","lvl","center","proj","transform","reset","homeGrid","point","what","home","set","grid","init","marker","get","is","prop","layer","removeLayer","source","Vector","addFeature","Feature","geometry","geom","Point","style","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","src","addLayer","getZoom","getCenter","distance","location","dist","Sphere","haversineDistance","toFixed","popover","coordinates","feature","geoName","getJSON","json","html","getGeometry","getCoordinates","addClass","name","grat","id","removeClass","x","toString","split","y","join","setPosition","undefined","isOpen","loadmap","Overlay","element","getElementById","autoPan","autoPanAnimation","click","blur","defaultZoom","View","minZoom","system","maxZoom","rotation","projection","Geolocation","getProjection","setTracking","on","getPosition","baseMaps","OSM","hyb","BingMaps","key","bingKey","imagerySet","sat","list","current","type","register","load","setVisible","baseMapLayer","newLayer","Tile","visible","push","baseMap","Group","layers","navigator","userAgent","match","renderer","resize","updateSize","Map","target","control","ScaleLine","Attribution","collapsible","interactions","interaction","defaults","rotate","altShiftDragRotate","pinchRotate","overlays","evt","forEachFeatureAtPixel","pixel","coordinate","hit","getTargetElement","cursor","open","box","data","attr","title","fadeIn","slideDown","scrollTop","slideUp","fadeOut","gcookie","setFullYear","getFullYear","single","dayOf","controlsVisible","resetSetHomeGrid","JSON","stringify","unset","alert","w30warning","date1","datepicker","date2","timeDiff","Math","abs","diffDays","ceil","c","baseLat","floor","baseLng","latSign","lngSign","draw","length","drawLine","fill","Fill","color","weight","stroke","Stroke","points","i","LineString","curDate","date","force","keepPopover","url","Object","prototype","call","doDraw","getTimezoneOffset","day","getDay","getDate","bgColor","fgColor","s","west","parseFloat","east","global","refreshMaxDate","maxDate","setTimer","nextCheck","time","setTimeout","changeMonth","changeYear","dateFormat","showOtherMonths","selectOtherMonths","firstDay","minDate","altField","defaultDate","nextText","prevText","hideIfNoPrevNext","onSelect","min","max","slide","event","ui","hasClass","colorSet","stopPropagation","keyup","g","keyCode","which","niceScroll","showDisclaimer"],"mappings":"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","file":"map.min.js","sourcesContent":["/*\n * file:\t\tscript.js\n * author:\t\tMarten Tacoma\n * contents:\tall custom js\n */\n\nvar map, view, settings, ol, xs,xt,xl, ys,yt,yl, gridLayer, gridVector, geolocation, mapLayer, markerLayers = [], content, closer, overlay, days = {0:'Su', 1:'Mo', 2:'Tu', 3:'We', 4:'Th', 5:'Fr', 6:'Sa'};\n\nfunction closeDisclaimer(){\n\tvar expiration_date = new Date();\n\texpiration_date.setTime(expiration_date.getTime()+(30*24*60*60*1000));\n\tvar cookie_string = \"disclaimer=\"+(Date.now() / 1000 | 0)+\";secure; path=/; expires=\" + expiration_date.toGMTString();\n\tdocument.cookie = cookie_string;\n\tgreybox.close();\n}\n\n//insert li at the right alphabetical place in an ul\nfunction addLiAlpha(ul, li){\n\tvar added = false;\n\t$(ul+\" li\").each(function(){\n\t\tif($(this).text().toLowerCase() > $(li).text().toLowerCase()){\n\t\t\t$(li).insertBefore($(this));\n\t\t\tadded = true;\n\t\t\treturn false;\n\t\t}\n\t});\n\tif(!added){\n\t\t$(li).appendTo($(ul));\n\t}\n}\n\nvar controls = {\n\tshow: function(duration){\n\t\t$('#controls').animate({left:'0px'},duration);\n\t\t$('#controlsTop').animate({left:'0px',borderBottomRightRadius:0},duration);\n\t\t$('.ol-scale-line').animate({left:'328px'},duration);\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\t$('#w30warning').animate({left:'320px',paddingLeft:'0px'});\n\t\t}\n\t},\n\thide: function(){\n\t\t$('#controls').animate({left:'-320px'});\n\t\t$('#controlsTop').animate({left:'-242px',borderBottomRightRadius:5});\n\t\t$('.ol-scale-line').animate({left:'8px'});\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\t$('#w30warning').animate({left:'0px',paddingLeft:'80px'});\n\t\t}\n\t},\n\ttoggle: function(){\n\t\tl = $('#controls').css('left');\n\t\tif(l === '0px'){\n\t\t\tcontrols.hide();\n\t\t} else if (l === '-320px') {\n\t\t\tcontrols.show();\n\t\t}\n\t}\n};\n\nvar zoom = {\n\tvalue: settings.user.zoom,\n\tchange: function(){\n\t\tzoom.value = $('#inputZoomLevel').val();\n\t\t$('#zoomControl .slider').slider('value', zoom.value);\n\t\tzoom.doZoom(zoom.value);\n\t},\n\tdoZoom: function(value){\n\t\tview.animate({zoom: value, duration:500});\n\t},\n\tto: function(lat,lng,lvl){\n\t\tview.animate({zoom: lvl, center: ol.proj.transform([lng,lat], 'EPSG:4326', 'EPSG:3857'), duration:500});\n\t},\n\treset: function(){\n\t\tview.animate({zoom: settings.user.zoom, center: ol.proj.transform(settings.user.center, 'EPSG:4326', 'EPSG:3857'), duration:500});\n\t}\n};\n\nfunction homeGrid(point){\n\tvar what = $('input[name=setHomeGrid]:checked').val();\n\tvar point = ol.proj.transform(point, 'EPSG:3857', 'EPSG:4326');\n\tswitch(what){\n\t\tcase 'home':\n\t\t\thome.set(point);\n\t\t\tbreak;\n\t\tcase 'grid':\n\t\t\tgrid.init(point);\n\t\t\tmarker.get(true);\n\t\t\tbreak;\n\t\tcase 'both':\n\t\t\thome.set(point);\n\t\t\tgrid.init(point);\n\t\t\tmarker.get(true);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t//do nothing\n\t}\n\tif($('#resetSetHomeGrid').is(':checked')){\n\t\t$('#setHomeGridNothing').prop('checked', true);\n\t}\n}\n\nvar home = {\n\tlayer: null,\n\tmarker: null,\n\tpoint: null,\n\tset: function(point){\n\t\tmap.removeLayer(home.layer);\n\t\twhile(point[0] > 180){\n\t\t\tpoint[0] -= 360;\n\t\t}\n\t\twhile(point[0] < -180){\n\t\t\tpoint[0] += 360;\n\t\t}\n\t\thome.point = point;\n\t\tsettings.user.home = point;\n\t\thome.marker = new ol.source.Vector({});\n\t\thome.marker.addFeature(new ol.Feature({geometry: new ol.geom.Point(ol.proj.transform(point, 'EPSG:4326', 'EPSG:3857'))}));\n\t\thome.layer = new ol.layer.Vector({\n\t\t\tsource: home.marker,\n\t\t\tstyle: new ol.style.Style({\n\t\t\t\timage: new ol.style.Icon({\n\t\t\t\t\tanchor: [16,16],\n\t\t\t\t\tanchorXUnits: 'pixels',\n\t\t\t\t\tanchorYUnits: 'pixels',\n\t\t\t\t\tsrc: '/img/marker.png'\n\t\t\t\t})\n\t\t\t})\n\t\t});\n\t\tmap.addLayer(home.layer);\n\t\tif(view.getZoom() === 2){\n\t\t\tzoom.to(point[1],point[0],settings.user.zoom);\n\t\t\tsettings.user.center = ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326');\n\t\t}\n\t},\n\tdistance: function(location){\n\t\tif(home.point == null){\n\t\t\treturn '';\n\t\t}\n\t\tvar wgs84Sphere = new ol.Sphere(6378137);\n\t\tvar dist = wgs84Sphere.haversineDistance(home.point,location)/1000;\n\t\treturn dist.toFixed(2) + ' km / ' +(dist*0.621371).toFixed(2) + ' miles<br/>';\n\t}\n};\n\npopover = {\n\tlat: null,\n\tlng: null,\n\tcoordinates: null,\n\tfeature: null,\n\tgeoName: function(){\n\t\t$.getJSON(\n\t\t\t'//data.geohashing.info/geoName/'+this.lat+'/'+this.lng,\n\t\t\tfunction(json){\n\t\t\t\t$('#geoName').html(json.geoName);\n\t\t\t}\n\t\t);\n\t},\n\tshow: function(feature){\n\t\tthis.feature = feature;\n\t\tthis.coordinates = ol.proj.transform(feature.getGeometry().getCoordinates(), 'EPSG:3857', 'EPSG:4326');\n\t\tthis.lng = this.coordinates[0];\n\t\tthis.lat = this.coordinates[1];\n\t\tthis.geoName();\n\t\tif(this.feature.get('global')){\n\t\t\t$('#popup').addClass('global');\n\t\t\tvar name = 'Globalhash ' + feature.get('date');\n\t\t\tvar grat = 'global';\n\t\t\tvar id = this.feature.get('date') + '_global';\n\t\t} else {\n\t\t\t$('#popup').removeClass('global');\n\t\t\tvar x = this.lng.toString().split('.')[0];\n\t\t\tvar y = this.lat.toString().split('.')[0];\n\t\t\tvar grat = y + ',' + x;\n\t\t\tvar name = 'Geohash ' + this.feature.get('date') + ' ' + y + ' ' + x;\n\t\t\tvar id = this.feature.get('date') + '_' + y + '_' + x;\n\t\t}\n\t\tcontent.html('<strong>'+name+'</strong> <button onclick=\"window.open(&quot;http://wiki.xkcd.com/geohashing/'+id+'&quot;)\">Meetup</button><br />'+\n\t\t\tthis.lat.toFixed(8) + ', ' + this.lng.toFixed(8) + ' <button onclick=\"zoom.to('+this.lat+','+this.lng+', 15)\">Zoom in</button><br />' +\n\t\t\t'<span id=\"geoName\"><span style=\"color:silver;font-style:italic\">[A location name should appear here]</span></span><br/>' +\n\t\t\thome.distance(this.coordinates) + \n\t\t\t'<button onclick=\"window.open(&quot;https://data.geohashing.info/hash/' + this.feature.get('date').split('-').join('/') + '/' + grat + '.gpx&quot;)\">GPX</button> <button onclick=\"window.open(&quot;http://geo.crox.net/poster/'+id+'&quot;)\">Poster</button> <button onclick=\"window.open(&quot;http://www.geocaching.com/seek/nearest.aspx?origin_lat='+this.lat+'&amp;origin_long='+this.lng+'&quot;)\">Nearby geocaches</button>'\n\t\t\t+ '<button onclick=\"window.open(&quot;https://maps.google.com/?q='+this.lat+','+this.lng+'&quot;)\">Google Maps</button>'\n\t\t\t+ ' <button onclick=\"window.open(&quot;https://geohashing.info/mobile/' + this.feature.get('date').split('-').join('/') + '/' + grat + '&quot;)\">Navigation compass</button> '\n\t\t\t);\n\t\toverlay.setPosition(this.feature.getGeometry().getCoordinates());\n\t},\n\thide: function(){\n\t\toverlay.setPosition(undefined);\n\t}\n};\n\nloadmap = function(){\n\tcontent = $('#popup-content');\n\tcloser = $('#popup-closer');\n\toverlay = new ol.Overlay({\n\t\telement: document.getElementById('popup'),\n\t\tautoPan: true,\n\t\tautoPanAnimation: {\n\t\t\tduration: 250\n\t\t}\n\t});\n\tcloser.click(function() {\n\t\toverlay.setPosition(undefined);\n\t\tcloser.blur();\n\t\treturn false;\n\t});\n\t\n\tvar defaultZoom = (settings.user.center != '0,0') ? settings.user.zoom : 2;\n\tview = new ol.View({\n\t\tcenter: ol.proj.transform(settings.user.center, 'EPSG:4326', 'EPSG:3857'),\n\t\tminZoom: settings.system.minZoom,\n\t\tzoom: defaultZoom,\n\t\tmaxZoom: settings.system.maxZoom,\n\t\trotation: 0,\n\t\tprojection: 'EPSG:3857'\n\t});\n\t\n\tgeolocation = new ol.Geolocation({\n\t\tprojection: view.getProjection()\n\t});\n\t\n\tif(settings.user.home == '0,0'){\n\t\tgeolocation.setTracking(true);\n\t\tif(settings.user.grid == '0,0'){\n\t\t\t$('#setHomeGridBoth').prop('checked', true);\n\t\t} else {\n\t\t\t$('#setHomeGridHome').prop('checked', true);\n\t\t}\n\t}\n\t\n\tgeolocation.on('change', function() {\n\t\thomeGrid(geolocation.getPosition());\n\t});\n\n\t//all available basemaps\n\tvar baseMaps = {\n\t\t'map': {\n\t\t\tsource: new ol.source.OSM(),\n\t\t\tname: 'OpenStreetMap'\n\t\t},\n\t\t'hyb': {\n\t\t\tsource : new ol.source.BingMaps({\n\t\t\t\tkey: settings.system.bingKey,\n\t\t\t\timagerySet: 'AerialWithLabels'\n\t\t\t}),\n\t\t\tname: 'Bing maps (Hybrid)'\n\t\t},\n\t\t'sat': {\n\t\t\tsource : new ol.source.BingMaps({\n\t\t\t\tkey: settings.system.bingKey,\n\t\t\t\timagerySet: 'Aerial'\n\t\t\t}),\n\t\t\tname: 'Bing maps (Satellite)'\n\t\t}\n\t};\n\tmapLayer = {\n\t\tlist: {},\n\t\tcurrent: settings.user.type,\n\t\tregister: function(id, layer, name) {\n\t\t\tthis.list[id] = layer;\n\t\t\taddLiAlpha('#mapControl', '<li onclick=\"javascript:mapLayer.load(\\'' + id + '\\')\"><input type=\"radio\" name=\"map\" value=\"' + id + '\" onchange=\"javascript:mapLayer.load(\\'' + id + '\\')\" id=\"map_' + id + '\" ' + ((this.current === id) ? 'checked=\"checked\"' : '') + '/> <label for=\"map_' + id + '\">' + name + '</label></li>');\n\t\t},\n\t\tload: function(id) {\n\t\t\tif (id !== this.current) {\n\t\t\t\tthis.list[id].setVisible(true); //show requested map\n\t\t\t\tthis.list[this.current].setVisible(false); //hide the visible map\n\t\t\t\tthis.current = id;\n\t\t\t\t$('#map_' + id).prop('checked', true);\n\t\t\t}\n\t\t}\n\t};\n\n\tvar baseMapLayer = [];\n\tfor (var key in baseMaps) {\n\t\tvar newLayer = new ol.layer.Tile({\n\t\t\tsource: baseMaps[key].source,\n\t\t\tvisible: (mapLayer.current === key)\n\t\t});\n\t\tmapLayer.register(key, newLayer, baseMaps[key].name);\n\t\tbaseMapLayer.push(newLayer);\n\t}\n\t\n\tvar baseMap = new ol.layer.Group({\n\t\tlayers: baseMapLayer\n\t});\n\t\n\t//limit renderer when using twitter app on iOS (iPad, iPhone, iPod)\n\tif(navigator.userAgent.match(/Twitter for iP/i)){\n\t\trenderer = 'dom';\n\t\t$(window).resize(function(){\n\t\t\t$('#map').width($(window).width());\n\t\t\t$('#map').height($(window).height());\n\t\t\tmap.updateSize();\n\t\t});\n\t} else {\n\t\trenderer = ['canvas', 'dom', 'webgl'];\n\t}\n\tmap = new ol.Map({\n\t\ttarget: document.getElementById('map'),\n\t\tlayers: [ baseMap],\n\t\tview: view,\n\t\tcontrols: [\n\t\t\tnew ol.control.ScaleLine(),\n\t\t\tnew ol.control.Attribution({\n\t\t\t\tcollapsible: false\n\t\t\t})\n\t\t],\n\t\tinteractions: ol.interaction.defaults({\n\t\t\trotate: false,\n\t\t\taltShiftDragRotate: false,\n\t\t\tpinchRotate: false\n\t\t}),\n\t\toverlays: [overlay],\n\t\trenderer: renderer\n\t});\n\t\n\tmap.on('moveend', function(){\n\t\t$('#inputZoomLevel').val(view.getZoom());\n\t\tzoom.change();\n\t});\n\t\n\tmap.on('singleclick', function(evt) {\n\t\tvar feature = map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\n\t\t\treturn feature;\n\t\t});\n\t\tif(typeof feature !== 'undefined' && feature.get('date')){\n\t\t\tpopover.show(feature);\n\t\t} else {\n\t\t\thomeGrid(evt.coordinate);\n\t\t}\n\t});\n\t\n\tmap.on('pointermove', function(evt) {\n\t\tvar hit = map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\n\t\t\treturn feature.get('date');\n\t\t});\n\t\tmap.getTargetElement().style.cursor = hit ? 'pointer' : '';\n\t});\n};\n\nvar greybox = {\n\tisOpen: false,\n\topen: function(box){\n\t\t$.getJSON('/text/'+box, function(data){\n\t\t\t$('#greybox>div').attr('class', box);\n\t\t\t$('#greybox .title').html(data.title);\n\t\t\t$('#greybox .content').html(data.content);\n\t\t\t$(\"#greybox .content a[href^='http']\").attr('target','_blank');\n\t\t\t$('#greybox').fadeIn();\n\t\t\t$('#greybox div').slideDown();\n\t\t\t$('#greybox .content').scrollTop(0);\n\t\t\tgreybox.isOpen = true;\n\t\t});\n\t\treturn false;\n\t},\n\tclose: function(){\n\t\t$('#greybox>div').slideUp();\n\t\t$('#greybox').fadeOut();\n\t\t$('#greybox .closer').blur();\n\t\tgreybox.isOpen = false;\n\t}\n};\n\nvar gcookie = {\n\tset: function(){\n\t\t// Build the expiration date string:\n\t\tvar expiration_date = new Date();\n\t\tvar cookie_string = '';\n\t\texpiration_date.setFullYear(expiration_date.getFullYear() + 10);\n\t\t// Build the set-cookie string:\n\t\tsettings.user.center = ol.proj.transform(view.getCenter(), 'EPSG:3857', 'EPSG:4326');\n\t\tsettings.user.zoom = view.getZoom();\n\t\tsettings.user.single = !$('#showWeek').is(':checked'); \n\t\tsettings.user.dayOf = $('#dayOfWeek').is(':checked') ? 'week' : 'month';\n\t\tsettings.user.type = $('input[name=map]:checked').val();\n\t\tsettings.user.controlsVisible = $('#controlsVisible').is(':checked');\n\t\tsettings.user.resetSetHomeGrid = $('#resetSetHomeGrid').is(':checked');\n\t\tcookie_string = \"config=\"+JSON.stringify(settings.user)+\";secure; path=/; expires=\" + expiration_date.toGMTString();\n\t\t// Create/update the cookie:\n\t\tdocument.cookie = cookie_string;\n\t\tgreybox.open('settings');\n\t},\n\tunset: function(){\n\t\tcookie_string = \"config=;secure ;path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT\";\n\t\tdocument.cookie = cookie_string;\n\t\twindow.alert('Your cookie is deleted');\n\t}\n};\n\nvar w30warning = {\n\ttoggle: function(){\n\t\tlng = settings.user.grid[0];\n\t\tif(lng < -29.0 || lng >= 179){\n\t\t\tvar date1 = new Date($('#dateControl .content.datepicker').datepicker('option', 'maxDate'));\n\t\t\tvar date2 = new Date($('#datepicker').val());\n\t\t\tvar timeDiff = Math.abs(date2.getTime() - date1.getTime());\n\t\t\tvar diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));\n\t\t\tif((diffDays === 0 || (diffDays < 7 && $('#showWeek').is(':checked')))){\n\t\t\t\tthis.show();\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\tshow: function(){\n\t\t$('#w30warning .date').html($('#dateControl .content.datepicker').datepicker('option', 'maxDate'));\n\t\t$('#w30warning').fadeIn();\n\t},\n\thide: function(){\n\t\t$('#w30warning').fadeOut();\n\t},\n\treset: function(){\n\t\tif($(window).width() > 400 && $(window).height() > 400){\n\t\t\tl = $('#controls').css('left');\n\t\t\tif(l === '0px'){\n\t\t\t\t$('#w30warning').css('left', '320px');\n\t\t\t\t$('#w30warning').css('padding-left', '0px');\n\t\t\t} else if (l === '-320px') {\n\t\t\t\t$('#w30warning').css('left', '0px');\n\t\t\t\t$('#w30warning').css('padding-left', '80px');\n\t\t\t}\n\t\t} else {\n\t\t\t$('#w30warning').css('left', '');\n\t\t\t$('#w30warning').css('padding-left', '');\n\t\t}\n\t}\n};\n"]}